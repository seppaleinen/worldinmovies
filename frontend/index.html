<html>
<head>
	<link rel="stylesheet" href="index.css">

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <link href="jqvmap.min.css" media="screen" rel="stylesheet" type="text/css">

    <script type="text/javascript" src="jquery.vmap.min.js"></script>
    <script type="text/javascript" src="jquery.vmap.world.js" charset="utf-8"></script>

    <script type="text/javascript">
    $(document).ready(function(){
        jQuery('#vmap').vectorMap({
            map: 'world_en',
            backgroundColor: '#a5bfdd',
            borderColor: '#818181',
            borderOpacity: 0.25,
            borderWidth: 1,
            color: '#f4f3f0',
            enableZoom: true,
            hoverColor: '#c9dfaf',
            hoverOpacity: null,
            normalizeFunction: 'linear',
            scaleColors: ['#b6d6ff', '#005ace'],
            selectedColor: '#c9dfaf',
            selectedRegions: null,
            showTooltip: true,
            onRegionClick: function(element, code, region) {
                $.get("http://localhost:8000/view/best/" + code.toUpperCase(),
                    function(data) {
                        string = data
                            .map(item => item['original_title'] + ':' + item['vote_average'])
                            .join('\n')
                        alert(string);
                        data.forEach(item => console.log(item));
                        //alert('page content: ' + array.forEach(item => console.log(item));
                    }
                );
                //var message = 'You clicked "'
                //    + region
                //    + '" which has the code: '
                //    + code.toUpperCase();
                //alert(message);
            }
        });
    })

    </script>
</head>
<body>
<div id="app">
	{{ message }}
</div>

  <body>
    <div id="vmap" style="width: 600px; height: 400px;"></div>
  </body>

<script src="index.js"></script>
</body>
</html>